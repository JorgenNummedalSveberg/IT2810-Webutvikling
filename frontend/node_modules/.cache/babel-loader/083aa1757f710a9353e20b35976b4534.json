{"ast":null,"code":"var _jsxFileName = \"C:\\\\webdev\\\\prosjekt-4-jns\\\\frontend\\\\src\\\\Components\\\\Header\\\\SignLogIn.tsx\";\nimport React, { useState } from \"react\";\nimport { Button } from \"semantic-ui-react\";\nimport { useDispatch } from \"react-redux\";\nimport { login, logout } from \"../../actions\";\nimport { Dialog, Input, DialogContent, DialogTitle } from \"@material-ui/core\";\n\nfunction SignLogIn(props) {\n  // Nødvendig for redux\n  const dispatch = useDispatch(); // Holder styr på inputs\n\n  const [userName, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [open, setOpen] = useState(false); // Holder styr på error\n\n  const [error, setError] = useState(false); // Lager request for fetch\n\n  const req = reqUser => {\n    return {\n      method: 'POST',\n      body: JSON.stringify(reqUser),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n  }; // Legger til en bruker på serveren\n\n\n  function addUser(reqUser) {\n    fetch('http://localhost:5000/api/user/add', req(reqUser)).then(response => {\n      if (response.ok) {\n        dispatch(login(reqUser));\n      } else {\n        setError({\n          message: \"Username is taken\",\n          log: false\n        });\n      }\n    });\n  } // Logger inn hvis brukeren finnes\n\n\n  function onLogin(user) {\n    fetch('http://localhost:5000/api/user?userName=' + user.userName + '&password=' + user.password).then(response => {\n      if (response.ok) {\n        response.json().then(movies => {\n          user.movies = movies;\n          dispatch(login(user));\n        });\n      } else {\n        setError({\n          message: \"Username or password is wrong\",\n          log: true\n        });\n      }\n    });\n  } // @ts-ignore\n\n\n  function handleNameChange(value) {\n    setError(false);\n    setUsername(value);\n  } // @ts-ignore\n\n\n  function handlePasswordChange(value) {\n    setError(false);\n    setPassword(value);\n  }\n\n  return (\n    /*\r\n    <Modal centered size={\"mini\"}\r\n           trigger={<Button style={{zIndex: '1000000'}}>Log in/Sign up</Button>}\r\n           closeIcon>\r\n        <Modal.Header>Log in / Sign in</Modal.Header>\r\n        {error ? (\r\n            <Modal.Content>\r\n               <Message compact error content={error.message}/>\r\n            </Modal.Content>\r\n        ) : null}\r\n        <Modal.Content>\r\n            <Input error={!!error} id={\"UsernameID\"} autoFocus label={\"Username\"} onChange={(e, {value}) => handleNameChange(value)}\r\n                   name={\"userName\"} placeholder='Username'/>\r\n        </Modal.Content>\r\n        <Modal.Content>\r\n            <Input type={\"password\"} error={!!error && error.log} id={\"PasswordID\"} label={\"Password\"} onChange={(e, {value}) => handlePasswordChange(value)}\r\n                   name={\"password\"} placeholder='Password'/>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n            <Button id={\"loginButtonID\"} onClick={() => onLogin({\r\n                userName: userName,\r\n                password: password,\r\n                movies: []\r\n            })} type='submit'>Log in</Button>\r\n            <Button id={\"submitButtonID\"}\r\n                    onClick={() => addUser({userName: userName, password: password, movies: []})} type='submit'>Sign\r\n                up</Button>\r\n        </Modal.Actions>\r\n    </Modal>\r\n       */\n    props.isLogged ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 14\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => setOpen(true),\n      style: {\n        zIndex: '1000000'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }\n    }, \"Log in/Sign up\"), /*#__PURE__*/React.createElement(Dialog, {\n      open: open,\n      onClose: () => setOpen(false),\n      title: \"Log in/Sign up\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DialogTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    }, \"Log in/Sign up\"), /*#__PURE__*/React.createElement(DialogContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      error: !!error,\n      id: \"UsernameID\",\n      autoFocus: true,\n      \"aria-label\": \"Username\",\n      onChange: e => handleNameChange(e.target.value),\n      name: \"userName\",\n      placeholder: \"Username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 29\n      }\n    })))) : /*#__PURE__*/React.createElement(Button, {\n      onClick: () => dispatch(logout()),\n      style: {\n        zIndex: 1000000\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 14\n      }\n    }, \"Log out\")\n  );\n}\n\nexport default SignLogIn;","map":{"version":3,"sources":["C:/webdev/prosjekt-4-jns/frontend/src/Components/Header/SignLogIn.tsx"],"names":["React","useState","Button","useDispatch","login","logout","Dialog","Input","DialogContent","DialogTitle","SignLogIn","props","dispatch","userName","setUsername","password","setPassword","open","setOpen","error","setError","req","reqUser","method","body","JSON","stringify","headers","addUser","fetch","then","response","ok","message","log","onLogin","user","json","movies","handleNameChange","value","handlePasswordChange","isLogged","zIndex","e","target"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\r\nimport {Button, Modal, Message} from \"semantic-ui-react\";\r\nimport {useDispatch} from \"react-redux\";\r\nimport {User} from \"../../types/User\";\r\nimport {login, logout} from \"../../actions\";\r\nimport {Dialog, Input, DialogContent, DialogTitle} from \"@material-ui/core\";\r\n\r\nfunction SignLogIn(props: {isLogged: boolean}) {\r\n\r\n    // Nødvendig for redux\r\n    const dispatch = useDispatch();\r\n\r\n    // Holder styr på inputs\r\n    const [userName, setUsername] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const [open, setOpen] = useState(false);\r\n\r\n    // Holder styr på error\r\n    const [error, setError] = useState<false | {message: string, log: boolean }>(false);\r\n\r\n    // Lager request for fetch\r\n    const req = (reqUser: User) => {\r\n        return ({\r\n            method: 'POST',\r\n            body: JSON.stringify(reqUser),\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            }\r\n        })\r\n    }\r\n\r\n    // Legger til en bruker på serveren\r\n    function addUser(reqUser: User) {\r\n        fetch('http://localhost:5000/api/user/add', req(reqUser))\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    dispatch(login(reqUser));\r\n                } else {\r\n                    setError({message: \"Username is taken\", log: false});\r\n                }})\r\n    }\r\n\r\n    // Logger inn hvis brukeren finnes\r\n    function onLogin(user: User) {\r\n        fetch('http://localhost:5000/api/user?userName=' + user.userName + '&password='+user.password)\r\n            .then(response => {\r\n                if (response.ok) {\r\n                    response.json()\r\n                        .then(movies => {\r\n                            user.movies = movies;\r\n                            dispatch(login(user))\r\n                        })\r\n                } else {\r\n                    setError({message: \"Username or password is wrong\", log: true});\r\n                }})\r\n    }\r\n\r\n    // @ts-ignore\r\n    function handleNameChange(value: string) {\r\n        setError(false);\r\n        setUsername(value);\r\n    }\r\n\r\n    // @ts-ignore\r\n    function handlePasswordChange(value: string) {\r\n        setError(false);\r\n        setPassword(value)\r\n    }\r\n\r\n    return (\r\n        /*\r\n        <Modal centered size={\"mini\"}\r\n               trigger={<Button style={{zIndex: '1000000'}}>Log in/Sign up</Button>}\r\n               closeIcon>\r\n            <Modal.Header>Log in / Sign in</Modal.Header>\r\n            {error ? (\r\n                <Modal.Content>\r\n                   <Message compact error content={error.message}/>\r\n                </Modal.Content>\r\n            ) : null}\r\n            <Modal.Content>\r\n                <Input error={!!error} id={\"UsernameID\"} autoFocus label={\"Username\"} onChange={(e, {value}) => handleNameChange(value)}\r\n                       name={\"userName\"} placeholder='Username'/>\r\n            </Modal.Content>\r\n            <Modal.Content>\r\n                <Input type={\"password\"} error={!!error && error.log} id={\"PasswordID\"} label={\"Password\"} onChange={(e, {value}) => handlePasswordChange(value)}\r\n                       name={\"password\"} placeholder='Password'/>\r\n            </Modal.Content>\r\n            <Modal.Actions>\r\n                <Button id={\"loginButtonID\"} onClick={() => onLogin({\r\n                    userName: userName,\r\n                    password: password,\r\n                    movies: []\r\n                })} type='submit'>Log in</Button>\r\n                <Button id={\"submitButtonID\"}\r\n                        onClick={() => addUser({userName: userName, password: password, movies: []})} type='submit'>Sign\r\n                    up</Button>\r\n            </Modal.Actions>\r\n        </Modal>\r\n\r\n         */\r\n        props.isLogged ?\r\n            (<div>\r\n                <Button onClick={()=> setOpen(true)} style={{zIndex: '1000000'}}>Log in/Sign up</Button>\r\n                <Dialog open={open} onClose={()=> setOpen(false)} title='Log in/Sign up'>\r\n                    <DialogTitle>Log in/Sign up</DialogTitle>\r\n                    <DialogContent>\r\n                            <Input error={!!error} id={\"UsernameID\"} autoFocus aria-label={\"Username\"} onChange={(e) => handleNameChange(e.target.value)}\r\n                                   name={\"userName\"} placeholder='Username'/>\r\n                    </DialogContent>\r\n                </Dialog>\r\n            </div>):\r\n            (<Button onClick={() => dispatch(logout())} style={{zIndex: 1000000}}>Log out</Button>)\r\n\r\n    )\r\n}\r\n\r\nexport default SignLogIn;"]},"metadata":{},"sourceType":"module"}